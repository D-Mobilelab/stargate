<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/modules/Utils.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/D-Mobilelab/stargate.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  </ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/modules/Utils.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/**
 * Iterator
 *
 * @alias module:src/modules/Utils.Iterator
 * @example
 * var myArray = [&quot;pippo&quot;, &quot;pluto&quot;, &quot;paperino&quot;];
 * var it = Utils.Iterator(myArray);
 * it.next().value === &quot;pippo&quot;; //true
 * it.next().value === &quot;pluto&quot;; //true
 * it.next(true).value === &quot;paperino&quot; //false because with true you can reset it!
 * @param {Array} array - the array you want to transform in iterator
 * @returns {Object} - an iterator-like object
 * */
function Iterator(array){
    var nextIndex = 0;

    return {
        next: (reset) =&gt; {
            if (reset){ nextIndex = 0; }
            return nextIndex &lt; array.length ?
            { value: array[nextIndex++], done: false } :
            { done: true };
        }
    };
}

/**
 * A function to compose query string
 *
 * @alias module:src/modules/Utils.composeApiString
 * @example
 * var API = &quot;http://jsonplaceholder.typicode.com/comments&quot;
 * var url = composeApiString(API, {postId:1});
 * // url will be &quot;http://jsonplaceholder.typicode.com/comments?postId=1&quot;
 * @param {Strinq} _api
 * @param {Object} params - a key value object: will be append to &lt;api&gt;?key=value&amp;key2=value2
 * @returns {String} the string composed
 * */
function queryfy(_api, query){
    var previousQuery = dequeryfy(_api);
    var qs = &apos;&apos;, 
        finalQuery,
        api = _api.slice(0);
    

    if (api.indexOf(&apos;?&apos;) &gt; -1){
        api = api.slice(0, api.indexOf(&apos;?&apos;));        
    }

    api += &apos;?&apos;;    
    finalQuery = extend(previousQuery, query);

    for (var key in finalQuery){                
        qs += encodeURIComponent(key);
        // if a value is null or undefined keep the key without value
        if (finalQuery[key]){ qs += &apos;=&apos; + encodeURIComponent(finalQuery[key]); }
        qs += &apos;&amp;&apos;;
    }
    
    if (qs.length &gt; 0){
        qs = qs.substring(0, qs.length - 1); // chop off last
    }
    return [api, qs].join(&apos;&apos;);
}

/**
 * A function to dequerify query string
 *
 * @alias module:src/modules/Utils.dequerify
 * @example
 * var url = &quot;http://jsonplaceholder.typicode.com/comments?postId=1
 * var obj = dequerify(url); //obj is {&quot;postId&quot;:&quot;1&quot;} 
 * @param {Strinq} _url 
 * @returns {Object} the object with key-value pairs, empty if no querystring is present
 * */
function dequeryfy(_url){
    var param = decodeURIComponent(_url.slice(0));
    
    var query = param.split(&apos;?&apos;)[1];
    if (!query){ return {}; }
    
    var keyvalue = query.split(&apos;&amp;&apos;);
    
    return keyvalue.reduce((newObj, _keyvalue) =&gt; {
        var splitted = _keyvalue.split(&apos;=&apos;);
        var key = splitted[0];
        var value = splitted[1];
        newObj[key] = value;
        return newObj;        
    }, {});
}



/**
 * extend: this function merge two objects in a new one with the properties of both
 *
 * @param {Object} o1 -
 * @param {Object} o2 -
 * @returns {Object} a brand new object results of the merging
 * */
function extend(o1, o2){

    var isObject = Object.prototype.toString.apply({});
    if ((o1.toString() !== isObject) || (o2.toString() !== isObject)) {
        throw new Error(&apos;Cannot merge different type&apos;);
    }
    var newObject = {};
    for (var k in o1){
        if (o1.hasOwnProperty(k)){
            newObject[k] = o1[k];
        }
    }

    for (var j in o2) {
        if (o2.hasOwnProperty(j)){
            newObject[j] = o2[j];
        }
    }
    return newObject;
}

function getType(obj){
    return ({}).toString.call(obj).match(/\s([a-z|A-Z]+)/)[1].toLowerCase();    
}

module.exports = {
    Iterator,
    extend,
    queryfy,
    dequeryfy,
    getType
};</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.7)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
